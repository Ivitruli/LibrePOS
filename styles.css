/* ================= FUENTES LOCALES (OFFLINE & MULTIPLATAFORMA) ================= */
@font-face {
  font-family: 'FuenteJet';
  src: url('jetbrains.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'FuenteDM';
  src: url('dm.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

/* ================= VARIABLES Y ESTRUCTURA ================= */
:root {
  --bg:#F5F0E8; --surface:#FDFAF4; --surface2:#EDE8DE; --border:#D4C9B0;
  --text:#1A1612; --muted:#7A7060;
  --accent:#C4432A; --accent-light:#F0E0DC;
  --green:#2A6B3C; --green-light:#DCF0E2;
  --amber:#B07020; --amber-light:#F5E8D0;
  --blue:#1A4A7A; --blue-light:#DCE8F5;
  --ink:#1A1612; --purple:#5A2A7A; --purple-light:#EDE0F5;
  --c1:var(--accent); --c2:var(--ink);
}

* { box-sizing:border-box; margin:0; padding:0; }

body { 
  font-family: 'FuenteJet', monospace; 
  background: var(--bg); 
  color: var(--text); 
  min-height: 100vh; 
}

/* Títulos y textos destacados */
header h1, .card-title, .cart-header, .stat-value, .modal h2 { 
  font-family: 'FuenteDM', monospace; 
  font-weight: 700;
}

header { background:var(--c2); color:#F5F0E8; padding:0 1.2rem; display:flex; align-items:center; gap:1rem; height:60px; position:sticky; top:0; z-index:100; flex-wrap:wrap; }
.header-logo { width:36px; height:36px; border-radius:6px; object-fit:contain; display:none; background:transparent; } 
.header-logo.visible { display:block; }
header h1 { font-size:1.2rem; white-space:nowrap; } 
header h1 span { color:var(--c1); }

.nav-tabs { display:flex; gap:.15rem; margin-left:auto; flex-wrap:wrap; overflow-x:auto; }
.nav-tab { padding:.4rem .8rem; border:none; background:transparent; color:#A09888; font-family:'FuenteJet', monospace; font-size:.76rem; font-weight:600; cursor:pointer; border-radius:4px; transition:all .15s; text-transform:uppercase; letter-spacing:.03em; position:relative; white-space:nowrap; }
.nav-tab:hover { color:#F5F0E8; background:rgba(255,255,255,.08); } 
.nav-tab.active { color:var(--bg); background:var(--c1); }
.badge-alert { position:absolute; top:1px; right:1px; background:var(--accent); color:white; border-radius:50%; width:13px; height:13px; font-size:.58rem; display:flex; align-items:center; justify-content:center; }

main { max-width:1350px; margin:0 auto; padding:1.4rem; }

/* ================= CONTROL DE SECCIONES Y PESTAÑAS (LA SOLUCIÓN) ================= */
.section { display: none; } 
.section.active { display: block; }

.inf-tab { display: none; } 
.inf-tab.active { display: block; }

/* ================= COMPONENTES ================= */
.card { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:1.3rem; margin-bottom:1.3rem; box-shadow:0 2px 4px rgba(0,0,0,0.02); }
.card-title { font-size:1.1rem; margin-bottom:1rem; padding-bottom:.65rem; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }

.form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(165px,1fr)); gap:.85rem; }
.form-group { display:flex; flex-direction:column; gap:.32rem; }
label { font-size:.7rem; font-weight:600; text-transform:uppercase; letter-spacing:.06em; color:var(--muted); }
input,select,textarea { padding:.55rem .72rem; border:1px solid var(--border); border-radius:5px; font-family:'FuenteDM', monospace; font-size:.87rem; background:var(--surface); color:var(--text); transition:border-color .15s; outline:none; width:100%; }
input[type="checkbox"] { width:auto; accent-color:var(--c1); cursor:pointer; }
input:focus,select:focus,textarea:focus { border-color:var(--c1); }

.btn { padding:.58rem 1.25rem; border:none; border-radius:5px; font-family:'FuenteJet', monospace; font-size:.82rem; font-weight:600; cursor:pointer; transition:all .15s; }
.btn-primary { background:var(--c1); color:white; } .btn-primary:hover { opacity:.88; }
.btn-secondary { background:var(--surface2); color:var(--text); border:1px solid var(--border); } .btn-secondary:hover { background:var(--border); }
.btn-green { background:var(--green); color:white; } .btn-green:hover { background:#1f5230; }
.btn-blue { background:var(--blue); color:white; } .btn-blue:hover { background:#123a66; }
.btn-danger { background:transparent; color:var(--accent); border:1px solid var(--accent); } .btn-danger:hover { background:var(--accent-light); }
.btn-sm { padding:.32rem .72rem; font-size:.77rem; }

table { width:100%; border-collapse:collapse; font-size:.85rem; font-family:'FuenteDM', monospace; }
th { text-align:left; padding:.52rem .72rem; font-size:.68rem; font-weight:600; text-transform:uppercase; letter-spacing:.06em; color:var(--muted); border-bottom:2px solid var(--border); }
td { padding:.62rem .72rem; border-bottom:1px solid var(--surface2); vertical-align:middle; }
tr:hover td { background:var(--surface2); }

.mono { font-family:'FuenteDM', monospace; }
.badge { display:inline-block; padding:.17rem .52rem; border-radius:20px; font-size:.71rem; font-weight:600; }
.badge-green { background:var(--green-light); color:var(--green); } .badge-amber { background:var(--amber-light); color:var(--amber); } .badge-red { background:var(--accent-light); color:var(--accent); } .badge-blue { background:var(--blue-light); color:var(--blue); } .badge-ink { background:#E8E4DC; color:var(--ink); }

/* ================= POS & ESPECÍFICOS ================= */
.pos-layout { display:grid; grid-template-columns:1fr 370px; gap:1.3rem; align-items:start; }
.barcode-wrap { position:relative; margin-bottom:.5rem; }
.barcode-wrap input { width:100%; font-size:1.05rem; padding:.82rem 1rem .82rem 2.7rem; border:2px solid var(--ink); border-radius:6px; font-weight:600; }
.barcode-wrap::before { content:'▐▌▐▌'; position:absolute; left:.82rem; top:50%; transform:translateY(-50%); font-size:.92rem; color:var(--muted); pointer-events:none; }

.product-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(138px,1fr)); gap:.62rem; max-height:360px; overflow-y:auto; }
.product-card { background:var(--surface); border:1px solid var(--border); border-radius:6px; padding:.78rem; cursor:pointer; transition:all .15s; }
.product-card:hover { border-color:var(--c1); background:var(--accent-light); transform:translateY(-1px); }
.product-card .pname { font-size:.8rem; font-weight:600; line-height:1.3; margin-bottom:.26rem; }

.cart-panel { background:var(--surface); border:1px solid var(--border); border-radius:8px; position:sticky; top:72px; }
.cart-header { background:var(--ink); color:var(--bg); padding:.85rem 1.05rem; font-size:.95rem; }
.cart-items { min-height:140px; max-height:270px; overflow-y:auto; }
.cart-item { padding:.65rem .95rem; border-bottom:1px solid var(--surface2); display:grid; grid-template-columns:1fr auto; gap:.42rem; align-items:center; }
.qty-btn { width:23px; height:23px; border:1px solid var(--border); border-radius:4px; background:var(--surface2); cursor:pointer; display:flex; align-items:center; justify-content:center; }
.cart-footer { padding:.9rem 1.05rem; border-top:2px solid var(--border); }

.medios-pago { display:grid; grid-template-columns:repeat(auto-fit,minmax(50px,1fr)); gap:.3rem; margin-bottom:.75rem; }
.medio-btn { padding:.38rem .2rem; border:2px solid var(--border); border-radius:5px; background:var(--surface2); font-size:.68rem; font-weight:600; cursor:pointer; text-align:center; }
.medio-btn.selected { border-color:var(--green); background:var(--green-light); color:var(--green); }

.cart-total-row { display:flex; justify-content:space-between; align-items:baseline; }
.cart-total-amount { font-size:1.8rem; font-weight:900; }
.precio-calc { background:var(--amber-light); border:1px solid var(--amber); border-radius:6px; padding:.95rem; margin-top:.95rem; }

/* ================= DASHBOARD, INFORMES & FINANZAS ================= */
.stat-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(185px,1fr)); gap:.85rem; margin-bottom:1.3rem; }
.stat-card { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:1.05rem; border-left:4px solid var(--c1); }
.stat-label { font-size:.68rem; text-transform:uppercase; letter-spacing:.08em; color:var(--muted); margin-bottom:.42rem; font-weight:600; }
.stat-value { font-size:1.6rem; font-weight:900; }
.stat-sub { font-size:.72rem; color:var(--muted); margin-top:.22rem; line-height:1.3; }

.tabs-row { display:flex; gap:.35rem; margin-bottom:.95rem; border-bottom:2px solid var(--border); flex-wrap:wrap; }
.tab-pill { padding:.52rem .95rem; font-size:.78rem; font-weight:600; cursor:pointer; border:none; background:none; color:var(--muted); border-bottom:2px solid transparent; margin-bottom:-2px; }
.tab-pill.active { color:var(--c1); border-bottom-color:var(--c1); }

.account-card { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:1rem; display:flex; flex-direction:column; gap:.5rem; }
.account-name { font-size:.9rem; font-weight:600; }
.account-bal { font-family:'FuenteDM', monospace; font-size:1.4rem; font-weight:600; color:var(--ink); }

/* Libro Diario */
.diario-row { border-bottom:1px solid var(--surface2); }
.diario-header { background:var(--surface2); font-weight:600; font-size:.75rem; }
.diario-cuenta { padding-left:.5rem; } .diario-cuenta.haber { padding-left:2.5rem; color:var(--muted); }

/* ================= MODALES ================= */
.modal-overlay { display:none; position:fixed; inset:0; background:rgba(26,22,18,.7); z-index:200; align-items:center; justify-content:center; backdrop-filter:blur(2px); }
.modal-overlay.open { display:flex; }
.modal { background:var(--surface); border-radius:10px; padding:1.75rem; max-width:540px; width:93%; border:1px solid var(--border); max-height:93vh; overflow-y:auto; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
.modal h2 { font-size:1.25rem; margin-bottom:1.05rem; }
.modal-actions { display:flex; gap:.65rem; justify-content:flex-end; margin-top:1.3rem; }

#toast { position:fixed; bottom:1.75rem; right:1.75rem; background:var(--ink); color:var(--bg); padding:.72rem 1.25rem; border-radius:6px; font-size:.85rem; font-weight:500; opacity:0; transform:translateY(8px); transition:all .25s; z-index:300; }
#toast.show { opacity:1; transform:translateY(0); } #toast.success { border-left:4px solid var(--green); } #toast.error { border-left:4px solid var(--accent); }

/* ================= UTILS ================= */
.edit-inline { border:none; background:transparent; font-family:'FuenteDM', monospace; font-size:.82rem; width:70px; text-align:right; padding:.15rem .3rem; border-bottom:1px dashed var(--border); }
.edit-inline:focus { outline:none; border-bottom-color:var(--c1); }
.info-tooltip { font-size:.7rem; color:var(--muted); background:var(--surface2); padding:.4rem .6rem; border-radius:4px; margin-top:.3rem; line-height:1.4; }